<@override name="content">
<div class="pagination pagination-centered">
  <div class="pull-left" id="problem-search">
    <form class="form-search" action="problem/search" method="post">
      <div class="input-append">
        <input type="hidden" name="scope" value="title">
        <input type="text" class="input-medium search-query" name="word" placeholder="Try a random problem">
        <button type="submit" class="btn btn-info">Go</button>
      </div>
    </form>
  </div>
  <#include "../common/_paginate.html" />
  <@paginate currentPage=problemList.pageNumber totalPage=problemList.totalPage actionUrl="problem/" />
  <div class="pull-right">
    <span class="badge badge-info">${problemList.pageNumber}/${problemList.totalPage} Pages</span> 
    <span class="badge badge-info">${problemList.totalRow} Problems</span>
  </div>
</div>

<table id="problem-list" class="table table-hover table-condensed">
  <thead>
    <tr>
      <th></th>
      <th>ID</th>
      <th>Title</th>
      <th>AC</th>
      <th>Submit</th>
      <th>Ratio</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <#if problemList??> <#list problemList.list as Problem>
    <tr>
      <td class="result"><#if Problem.userResult??><image src="assets/images/<#if Problem.userResult==0>accepted.gif<#else>wrong.gif</#if>" /></#if>
      </td>
      <td class="pid"><a href="problem/show/${Problem.pid!}">${Problem.pid!}</a></td>
      <td class="title"><a href="problem/show/${Problem.pid!}"><#if Problem.status==false><del></#if>${Problem.title!}<#if Problem.status==false></del></#if>
      </a></td>
      <td class="accept"><a href="status/?pid=${Problem.pid!}&result=0">${Problem.accept!}</a></td>
      <td class="submit"><a href="status/?pid=${Problem.pid!}">${Problem.submit!}</a></td>
      <td class="ratio"><#if Problem.submit&gt;0>${(Problem.accept/Problem.submit*100)?int}<#else>0</#if>%</td>
      <td class="ctime">${Problem.ctime!}</td>
    </tr>
    </#list> </#if>
  </tbody>
</table>

<#if (problemList.list.size()>=pageSize/2)>
<div class="pagination pagination-centered">
  <@paginate currentPage=problemList.pageNumber totalPage=problemList.totalPage actionUrl="problem/" />
</div>
</#if>
</@override>

<@override name="scripts">
  <link rel="stylesheet" href="assets/tablecloth/css/tablecloth.css">
  <script src="assets/tablecloth/js/jquery.metadata.js"></script>
  <script src="assets/tablecloth/js/jquery.tablesorter.min.js"></script>
  <script src="assets/tablecloth/js/jquery.tablecloth.js"></script>

  <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      var prevpage="problem/${problemList.pageNumber-1}<#if problemList.pageSize!=pageSize>-${problemList.pageSize}</#if>"
      var nextpage="problem/${problemList.pageNumber+1}<#if problemList.pageSize!=pageSize>-${problemList.pageSize}</#if>"
      $(document).keydown(function(event) {
        <#if problemList.pageNumber&gt;1>if(event.keyCode==37)window.location=prevpage;</#if>
        <#if problemList.pageNumber<problemList.totalPage>if(event.keyCode==39)window.location=nextpage;</#if>
      });

      <#if oj_style != "slate">
      $("#problem-list").tablecloth({
        theme:"stats",
        condensed:true,
        sortable:true,
        striped:true,
        clean:true
      });
      </#if>

      <#if user??>
      $('td.pid').each(function(i) {
        var result = $(this).prev('.result');
        $.getJSON('api/problem/userResult?pid=' + $(this).text(), function(data) {
          if (data.result)
          {
            if (data.result.id)
              result.addClass('wa').html('<img src="assets/images/wrong.gif"/>');
            else
              result.addClass('ac').html('<img src="assets/images/accepted.gif"/>');
          }
        });
      });
      </#if>
    });
  </script>
</@override>
<@extends name="../common/_layout.html" />
